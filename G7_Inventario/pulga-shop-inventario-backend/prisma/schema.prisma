generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ciudad {
  id_ciudad Int      @id @default(autoincrement())
  nombre    String   @unique @db.VarChar(100)
  tiendas   Tienda[]

  @@map("ciudad")
}

model Tienda {
  id_tienda      Int        @id @default(autoincrement())
  id_vendedor    String     @db.VarChar(24)
  nombre         String     @db.VarChar(100)
  id_ciudad      Int
  direccion      String     @db.VarChar(200)
  descripcion    String
  telefono       String     @db.VarChar(20)
  fecha_creacion DateTime?  @default(now()) @db.Timestamp(6)
  online         Boolean
  activo         Boolean?   @default(true)
  Producto       Producto[]
  Ciudad         Ciudad     @relation(fields: [id_ciudad], references: [id_ciudad], onDelete: NoAction, onUpdate: NoAction)

  @@map("tienda")
}

model Producto {
  id_producto     Int             @id @default(autoincrement())
  id_tienda       Int
  nombre          String          @db.VarChar(100)
  stock           Int
  costo           Int
  sku             String          @unique @db.VarChar(36)
  condicion       condicion_enum? @default(NUEVO)
  fecha_creacion  DateTime?       @default(now()) @db.Timestamp(6)
  marca           String?         @default("Gen??rica") @db.VarChar(50)
  categoria       categoria_enum? @default(GENERAL)
  descripcion     String?         @default("Sin descripci??n")
  activo          Boolean?        @default(true)
  foto_referencia String?
  peso            Decimal?        @default(0.0) @db.Decimal(4, 1)
  alto            Int?            @default(0)
  largo           Int?            @default(0)
  ancho           Int?            @default(0)
  tienda          Tienda          @relation(fields: [id_tienda], references: [id_tienda], onDelete: NoAction, onUpdate: NoAction)

  @@map("producto")
}

enum categoria_enum {
  ELECTRONICA
  ROPA
  CALZADO
  HOGAR
  JUGUETES
  DEPORTES
  LIBROS
  ALIMENTOS
  BELLEZA
  OFICINA
  AUTOMOTRIZ
  MASCOTAS
  GENERAL
}

enum condicion_enum {
  NUEVO
  USADO
  REACONDICIONADO
}
